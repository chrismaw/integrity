{% extends 'base.twig' %}
    {% block header %}
    {% endblock header %}
{% block content %}
    <div id="app">
        <div>
            <transition name="fade" mode="out-in">
                <router-view></router-view>
            </transition>
        </div>
    </div>
    <template id="home">
        <div>
            {% set bg_color = "dark" %}
            {% set text_color = "white" %}
            {% include 'header.twig' %}
            {% if billboard %}
                <div id="billboard-grid">
                    <img id="billboard-img" src="{{ billboard.img|raw }}">
                    <div id="billboard-text" class="text-center text-white display-4" style="font-size: 4.5vw">
                        {{ billboard.text|raw }}
                        <div class="d-none d-md-inline pt-4">
                            <p></p>
                            <router-link to="/welcome" class="btn btn-lg text-white"
                                         style="border: 4px solid white; border-radius: 2px; font-size: .75rem">
                                <strong>COME TO A SERVICE</strong></router-link>
                            <router-link to="/beliefs" class="btn btn-lg text-white"
                                         style="border: 4px solid white; border-radius: 2px; font-size: .75rem">
                                <strong>SEE OUR BELIEFS</strong></router-link>
                        </div>
                    </div>
                </div>
                <div class="d-md-none py-1 text-center" style="background-color: #223D46;">
                    <router-link id="action-button1" to="/welcome" class="btn btn-lg text-white"
                                 style="border: 2px solid white; border-radius: 2px; font-size: .5rem">
                        <strong>COME TO A SERVICE</strong></router-link>
                    <router-link id="action-button2" to="/beliefs" class="btn btn-lg text-white"
                                 style="border: 2px solid white; border-radius: 2px; font-size: .5rem">
                        <strong>SEE OUR BELIEFS</strong></router-link>
                </div>
            {% endif %}
            <div class="bg-white text-dark py-3 mx-0 mb-0 mb-sm-4">
                <div class="text-center display-4" style="font-size: 4.5vw; line-height: 1; font-weight: bolder;">
                    CURRENT SERMON SERIES <br>
                    <span style="font-size: 4vw">{{ currentSeries.title|title }}</span>
                    <span style="font-size: 3vw">{% if currentSeries.tagline %} | {{ currentSeries.tagline|title }}{% elseif currentSeries.passage %} | {{ currentSeries.passage }}{% endif %}</span>
                </div>
                <div class="text-right container mb-5">
                    <router-link to="/series" style="text-decoration: none" class="text-dark">
                        <span style="vertical-align: text-bottom">VIEW SERIES&nbsp;&nbsp;&nbsp;</span>
                        <i style="font-size: 1.5em" class="text-info fas fa-caret-right"></i>
                    </router-link><br> {# keep break tag on line with router-link to avoid alignment issues #}
                    <a href="{{ app_uri }}resources/sermons/{{ currentSeries.slug }}/{{ latestSermon.slug }}"
                       style="text-decoration: none" class="text-dark">
                        <span style="vertical-align: text-bottom">LATEST SERMON&nbsp;&nbsp;&nbsp;</span>
                        <i style="color:#60aec8;font-size: 1.5em" class="fas fa-caret-right"></i>
                    </a>
                </div>
            </div>
            {#<div class="bg-white text-dark py-0 py-md-5 mx-0">#}
            {#<div class="col-12 col-md-6 p-0 text-center" style="min-height: 315px">#}
            {#<div class="h7 text-center" style="font-size: 5vw">SERVICE TIMEs</div>#}
            {#<div class="text-center">We meet at 9AM and 11AM every Sunday</div>#}
            {#</div>#}
            {#<div class="col-12 col-md-6 p-0">#}
            {#<div class="embed-responsive embed-responsive-1by1 mx-auto shadow">#}
            {#<iframe class="embed-responsive-item" style=""#}
            {#src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2864.3161577080405!2d-77.3445332202819!3d35.579932783701764!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89aedd71b55fe63f%3A0xcbc3538a485074ed!2s2725+E+14th+St%2C+Greenville%2C+NC+27858!5e0!3m2!1sen!2sus!4v1470882936894"#}
            {#frameborder="0" allowfullscreen="allowfullscreen"></iframe>#}
            {#</div>#}
            {#</div>#}
            {#</div>#}
            {#{% for section in sections %}#}
            {#<section style="margin-top: 5px">#}
            {#{% if section.heading %}<h2>{{ section.heading }}</h2>{% endif %}#}
            {#<div>#}
            {#{% if section.content %}{{ section.content|raw }}{% endif %}#}
            {#</div>#}
            {#</section>#}
            {#{% endfor %}#}
            <nav id="index-footer" class="navbar navbar-dark fixed-bottom text-white">
                <div class="text-left text-md-center mx-md-auto">
                        <span>
                            {{ settings.address }} {{ settings.city }},&nbsp;{{ settings.state }}
                            &nbsp;{{ settings.zip }}
                            <span class="d-none d-sm-inline"> | {{ settings.phone }} </span>
                        </span>
                    <span id="footer-break"><br></span>
                    <span class="align-content-between">
                            <a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/facebook.png"></a>
                            <a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/instagram.png"></a>
                            <a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/twitter.png"></a>
                            <a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/spotify.png"></a>
                        </span>
                </div>
                <button class="d-md-none navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                        style="border: none">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </nav>
            <div class="modal2 collapse navbar-collapse" id="navbarCollapse">
                {#<div class="modal2__header text-left">#}
                {#</div>#}
                <div class="modal2__content">
                    {% if headerLinks %}
                        <ul class="navbar-nav text-right text-white">
                            {% for key, parent in headerLinks %}
                                {% if key|length %}
                                    <li class="nav-item dropup text-white px-3">
                                        <a class="nav-link dropdown-toggle" style="color:white !important;" href="#"
                                           id="dropdown10" role="button" @click="flip{{ loop.index }} = !flip{{ loop.index }}"
                                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            {{ key|title }}
                                                <i v-if="flip{{ loop.index }}" class="fas fa-angle-down ml-2"></i>
                                                <i v-else class="rotate fas fa-angle-down ml-2"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right text-right"
                                             style="border:none" aria-labelledby="dropdown10">
                                            {% for link in parent %}
                                                <a class="dropdown-item"
                                                   href="{{ app_uri }}{{ link.parent ? link.parent : '' }}/{{ link.path }}">{{ link.name|title }}</a>
                                            {% endfor %}
                                        </div>
                                    </li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    {% else %}
                        <h1>No Parents, No Rules!</h1>
                    {% endif %}
                    <img id="modal-header-logo" style="" src="{{ app_uri }}img/{{ settings.header_logo_light }}"/>

                </div>
                {#<div class="modal2__footer fixed-bottom text-right">#}
                    {#<div class="text-left text-md-center mx-md-auto">#}
                        {#<span>#}
                            {#{{ settings.address }} {{ settings.city }},&nbsp;{{ settings.state }}#}
                            {#&nbsp;{{ settings.zip }}#}
                            {#<span class="d-none d-sm-inline"> | {{ settings.phone }} </span>#}
                        {#</span>#}
                        {#<span id="footer-break"><br></span>#}
                        {#<span class="align-content-between">#}
                            {#<a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/facebook.png"></a>#}
                            {#<a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/instagram.png"></a>#}
                            {#<a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/twitter.png"></a>#}
                            {#<a href="#" class="d-inline"><img src="{{ app_uri }}img/icons/spotify.png"></a>#}
                        {#</span>#}
                    {#</div>#}
                    {#<button id="" class="d-md-none navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"#}
                            {#aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">#}
                        {#<span class="navbar-toggler-icon"></span>#}
                    {#</button>#}
                {#</div>#}
            </div>
        </div>
    </template>

    <template id="welcome">
        {{ include('./templates/welcome') }}
    </template>

    <template id="beliefs">
        <div>
            <div class="container-fluid">
                <router-link to="/"><i style="color:#60aec8;font-size: 2.5em" class="fas fa-caret-left"></i>
                </router-link>
            </div>
            <h1>Believe it</h1>
        </div>
    </template>

    <template id="series">
        {{ include('./templates/series') }}
    </template>

{% endblock content %}
{% block footer %}
{% endblock footer %}
{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.3/vue.js"></script>
    <script src="https://unpkg.com/vue-router@2.0.0/dist/vue-router.js"></script>
    <script>
        const HomeComponent = {
            props: [
                {% for each in headerLinks %}
                'flip{{ loop.index }}',
                {% endfor %}
            ],
            template: '#home'};
        const WelcomeComponent = {template: '#welcome'};
        const BeliefsComponent = {template: '#beliefs'};
        const SeriesComponent = {template: '#series'};

        const routes = [
            {path: '/', component: HomeComponent},
            {path: '/welcome', component: WelcomeComponent},
            {path: '/beliefs', component: BeliefsComponent},
            {path: '/series', component: SeriesComponent},
            {path: '*', redirect: '/'}
        ];

        const router = new VueRouter({
            routes
        });
        const app = new Vue({
            router
        }).$mount('#app');
    </script>
{% endblock scripts %}
